library(ready4fun)
ready4fun::write_fn_type_dirs()
pkg_desc_ls <- ready4fun::make_pkg_desc_ls(pkg_title_1L_chr = "Author Literate Programs Using Markdown To Share Insights From Open, Modular Mental Health Simulations" %>% tools::toTitleCase(),
                                           pkg_desc_1L_chr = "ready4show provides tools for authoring technical documentation, analysis reports and scientific summaries to showcase insights generated by open, modular mental health simulations.
  This development version of the ready4show package has been made available as part of the process of testing and documenting the package. If you have any questions, please contact the authors (matthew.hamilton@orygen.org.au).",
                                           authors_prsn = c(utils::person(
                                             given = "Matthew",family = "Hamilton", email =
                                               "matthew.hamilton@orygen.org.au",role = c("aut",
                                                                                         "cre"),comment = c(ORCID = "0000-0001-7407-9194")
                                           ),
                                           utils::person("Glen", "Wiesner", email = "Glen.Wiesner@vu.edu.au",
                                                         role = c("aut"), comment = c(ORCID = "0000-0002-0071-130X")),
                                           #person("Alexandra", "Parker", email =  "Alex.Parker@vu.edu.au", role = c("rev"), comment = c(ORCID ="0000-0002-2398-6306")),
                                           #person("Cathrine", "Mihalopoulos",email = "cathy.mihalopoulos@deakin.edu.au", role = c("rev"), comment = c(ORCID = "0000-0002-7127-9462")),
                                           #person("Jonathan", "Karnon", email ="Jonathan.Karnon@flinders.edu.au", role = c("rev"), comment =c(ORCID = "0000-0003-3220-2099")),
                                           #person("Petra","Plencnerova", email = "Petra.Plencnerova@vu.edu.au", role =c("rev"), comment = c(ORCID = "0000-0001-9698-9084")),
                                           utils::person("Orygen", role = c("cph", "fnd")),
                                           utils::person("VicHealth",role = c("fnd")),
                                           utils::person("Victoria University", role =c("fnd"))
                                           ),
                                           urls_chr = c("https://ready4-dev.github.io/ready4show/",
                                                        "https://github.com/ready4-dev/ready4show",
                                                        "https://ready4-dev.github.io/ready4/"))
pkg_ds_ls_ls <- list(tibble::tibble(first_nm_chr = c("Alejandra","Fionn"),
                                    middle_nm_chr = c("Rocio", "Seamus"),
                                    last_nm_chr = c("Scienceace", "Researchchamp"),
                                    title_chr = c("Dr", "Prof"),
                                    qualifications_chr = c("MD, PhD", "MSc, PhD"),
                                    institute_chr = c("Insitute_A, Institute_B", "Institute_C, Institute_B"),
                                    sequence_int = c(1,2) %>% as.integer(),
                                    is_corresponding_lgl = c(T, F),
                                    email_chr = c("fake_email@fake_institute.com", "fake_email@made_up_org.com"),
                                    is_equal_first_lgl = c(F,F)) %>%
                       ready4fun::make_pkg_ds_ls(db_1L_chr = "authors_tb",
                                                 desc_1L_chr = "Example of an authors table with fake author entries",
                                                 title_1L_chr = "Example authors table",
                                                 url_1L_chr = "https://ready4-dev.com"),
                     tibble::tibble(short_name_chr = c("Insitute_A", "Institute_B", "Institute_C"),
                                    long_name_chr = c("Awesome University, Shanghai","August Institution, London","Highly Ranked Uni, Montreal")) %>%
                       ready4fun::make_pkg_ds_ls(db_1L_chr = "institutes_tb",
                                                 desc_1L_chr = "Example of an institutes table with fake institute entries",
                                                 title_1L_chr = "Example institutes table",
                                                 url_1L_chr = "https://ready4-dev.com"))
pkg_setup_r3 <- pkg_desc_ls %>%
  ready4fun::make_pkg_setup_ls(addl_pkgs_ls = ready4fun::make_addl_pkgs_ls(suggests_chr = "rmarkdown"),
                               build_ignore_ls = ready4fun::make_build_ignore_ls(file_nms_chr = c("initial_setup.R")),
                               check_type_1L_chr = "ready4",
                               copyright_holders_chr = "Orygen",
                               dev_pkgs_chr = c("ready4fun","ready4class","ready4use"),
                               lifecycle_stage_1L_chr = "experimental",
                               path_to_pkg_logo_1L_chr = "../../../../../Documentation/Images/ready4use-logo/default.png",
                               pkg_dmt_dv_dss_chr = c("https://doi.org/10.7910/DVN/HLLXZN",
                                                      "https://doi.org/10.7910/DVN/2Y9VF9"),
                               pkg_ds_ls_ls = pkg_ds_ls_ls,
                               ready4_type_1L_chr = "authoring",
                               user_manual_fns_chr = c("make_eq_ref","make_rprt_type_ls",
                                                        "print_table",
                                                        "write_mdl_plt_fl","write_mkdn_from_pkg","write_rprt"))
constructor_tbl_r3 <- ready4class::ready4class_constructor_tbl() %>%
  dplyr::bind_rows(ready4class::make_pt_ready4class_constructor_tbl(make_s3_lgl = TRUE,
                                                                    name_stub_chr = "authors_lup",
                                                                    pt_ls = list(list("tibble")),
                                                                    pt_chkr_pfx_ls = list(list("is_")),
                                                                    pt_ns_ls = list(list("tibble")),
                                                                    vals_ls = list(list(first_nm_chr = "character(0)",
                                                                                        middle_nm_chr = "character(0)",
                                                                                        last_nm_chr = "character(0)",
                                                                                        title_chr = "character(0)",
                                                                                        qualifications_chr = "character(0)",
                                                                                        institute_chr = "character(0)",
                                                                                        sequence_int = "integer(0)",
                                                                                        is_corresponding_lgl = "logical(0)",
                                                                                        email_chr = "character(0)",
                                                                                        is_equal_first_lgl = "logical(0)")),
                                                                    class_desc_chr = "ready4 S3 class for authors lookup table"),
                   dplyr::bind_rows(ready4class::make_pt_ready4class_constructor_tbl(make_s3_lgl = TRUE,
                                                                                     name_stub_chr = "institutes_lup",
                                                                                     pt_ls = list(list("tibble")),
                                                                                     pt_chkr_pfx_ls = list(list("is_")),
                                                                                     pt_ns_ls = list(list("tibble")),
                                                                                     vals_ls = list(list(distribution_chr = "character(0)",
                                                                                                         dstr_param_1_dbl = "numeric(0)",
                                                                                                         dstr_param_2_dbl = "numeric(0)",
                                                                                                         dstr_param_3_dbl = "numeric(0)",
                                                                                                         dstr_param_4_dbl = "numeric(0)",
                                                                                                         transformation_chr = "character(0)")),
                                                                                     class_desc_chr = "ready4 S3 class for institutes lookup table")))



manifest_r3 <- ready4class::ready4class_manifest(ready4class::make_pt_ready4class_manifest(pkg_setup_r3 = pkg_setup_r3,
                                                                              constructor_tbl_r3 = constructor_tbl_r3))
pkg_setup_r3 <- ready4fun::author(manifest_r3)
# pkg_setup_r3 <- ready4fun::update_msng_abbrs(pkg_setup_r3,
#                                              are_words_chr = c("email", "rdocx", "yaml"),
#                                              tf_to_singular_chr = c(prj = "prjs",
#                                                                     qual = "quals"))
# pkg_setup_r3 <- ready4fun::write_new_abbrs(pkg_setup_r3,
#                                            long_name_chr = c("graphics","project","qualification","rendered"),
#                                            no_plural_chr = c("graphics", "rendered"))

pkg_ds_ls_ls[[1]]$db_df
pkg_dss_tb <- pkg_ds_ls_ls[[1]]$db_df %>%
  ready4show_authors_lup() %>%
  ready4fun::write_and_doc_ds(db_1L_chr = pkg_ds_ls_ls[[1]]$db_1L_chr,
                              title_1L_chr = pkg_ds_ls_ls[[1]]$title_1L_chr,
                              desc_1L_chr = pkg_ds_ls_ls[[1]]$desc_1L_chr,
                              url_1L_chr = pkg_ds_ls_ls[[1]]$url_1L_chr,
                              abbreviations_lup = pkg_setup_r3$subsequent_ls$abbreviations_lup,
                              object_type_lup = pkg_setup_r3$subsequent_ls$object_type_lup)
pkg_dss_tb <- pkg_ds_ls_ls[[2]]$db_df %>%
  ready4show_institutes_lup() %>%
  ready4fun::write_and_doc_ds(db_1L_chr = pkg_ds_ls_ls[[2]]$db_1L_chr,
                              title_1L_chr = pkg_ds_ls_ls[[2]]$title_1L_chr,
                              desc_1L_chr = pkg_ds_ls_ls[[2]]$desc_1L_chr,
                              url_1L_chr = pkg_ds_ls_ls[[2]]$url_1L_chr,
                              abbreviations_lup = pkg_setup_r3$subsequent_ls$abbreviations_lup,
                              object_type_lup = pkg_setup_r3$subsequent_ls$object_type_lu,
                              pkg_dss_tb = pkg_dss_tb)
#usethis::use_package("ggfortify")
usethis::use_package("knitrBootstrap")

